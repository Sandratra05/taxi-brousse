<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Liste des clients</title>
    <link rel="stylesheet" th:href="@{/css/sidebar.css}">
</head>
<body>
    <div th:replace="fragments/sidebar :: sidebar"></div>
    <div class="content">
        <h1>Liste des clients</h1>
        <a href="/clients/create"><i class="fas fa-user-plus"></i> Créer un nouveau client</a>

        <!-- Formulaire de filtres -->
        <form action="/clients" method="get" class="filter-form">
            <h3><i class="fas fa-filter"></i> Filtrer les clients</h3>
            <label>Nom: <input type="text" name="nom" th:value="${nom}" placeholder="Rechercher par nom"/></label>
            <label>Prénom: <input type="text" name="prenom" th:value="${prenom}" placeholder="Rechercher par prénom"/></label>
            <label>Téléphone: <input type="text" name="telephone" th:value="${telephone}" placeholder="Rechercher par téléphone"/></label>
            <label>Email: <input type="text" name="email" th:value="${email}" placeholder="Rechercher par email"/></label>
            <div class="actions-buttons">
                <button type="submit"><i class="fas fa-search"></i> Filtrer</button>
                <a href="/clients" class="btn btn-secondary"><i class="fas fa-redo"></i> Réinitialiser</a>
            </div>
        </form>

        <table>
            <thead>
                <tr>
                    <th>Nom</th>
                    <th>Prénom</th>
                    <th>Téléphone</th>
                    <th>Email</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="client : ${clients}">
                    <td><strong th:text="${client.nom}"></strong></td>
                    <td th:text="${client.prenom}"></td>
                    <td th:text="${client.telephone}"></td>
                    <td th:text="${client.email}"></td>
                    <td>
                        <a th:href="@{/clients/{id}(id=${client.id})}"><i class="fas fa-eye"></i> Détails</a>
                        <a th:href="@{/clients/{id}/edit(id=${client.id})}"><i class="fas fa-edit"></i> Modifier</a>
                        <form th:action="@{/clients/{id}/delete(id=${client.id})}" method="post" class="inline-form">
                            <button type="submit" class="btn-danger" onclick="return confirm('Supprimer ce client ?')"><i class="fas fa-trash"></i> Supprimer</button>
                        </form>
                    </td>
                </tr>
                <tr th:if="${#lists.isEmpty(clients)}">
                    <td colspan="6" class="text-center"><i class="fas fa-info-circle"></i> Aucun client trouvé.</td>
                </tr>
            </tbody>
        </table>
    </div>
</body>
</html>

