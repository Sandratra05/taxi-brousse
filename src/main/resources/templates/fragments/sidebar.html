<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr">
<head>
    <title>Sidebar Fragment</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
<div th:fragment="sidebar" class="sidebar">
    <h2>
        <span class="logo-icon"><i class="fas fa-shuttle-van"></i></span>
        Taxi-Brousse
    </h2>
    <ul class="menu">
        <li class="menu-item">
            <a href="#" class="menu-link" onclick="toggleSubmenu(this); return false;">
                <i class="fas fa-bus-alt"></i>
                <span>Véhicules</span>
            </a>
            <ul class="submenu">
                <li><a th:href="@{/vehicules/create}">Ajouter un véhicule</a></li>
                <li><a th:href="@{/vehicules}">Liste des véhicules</a></li>
            </ul>
        </li>
        <li class="menu-item">
            <a href="#" class="menu-link" onclick="toggleSubmenu(this); return false;">
                <i class="fas fa-map-marked-alt"></i>
                <span>Trajets</span>
            </a>
            <ul class="submenu">
                <li><a th:href="@{/trajets/create}">Ajouter un trajet</a></li>
                <li><a th:href="@{/trajets}">Liste des trajets</a></li>
            </ul>
        </li>
        <li class="menu-item">
            <a href="#" class="menu-link" onclick="toggleSubmenu(this); return false;">
                <i class="fas fa-route"></i>
                <span>Voyages</span>
            </a>
            <ul class="submenu">
                <li><a th:href="@{/voyages/form}">Planifier un voyage</a></li>
                <li><a th:href="@{/voyages}">Liste des voyages</a></li>
            </ul>
        </li>
        <li class="menu-item">
            <a href="#" class="menu-link" onclick="toggleSubmenu(this); return false;">
                <i class="fas fa-users"></i>
                <span>Clients</span>
            </a>
            <ul class="submenu">
                <li><a th:href="@{/clients/create}">Ajouter un client</a></li>
                <li><a th:href="@{/clients}">Liste des clients</a></li>
            </ul>
        </li>
        <li class="menu-item">
            <a href="#" class="menu-link" onclick="toggleSubmenu(this); return false;">
                <i class="fas fa-ticket-alt"></i>
                <span>Billets</span>
            </a>
            <ul class="submenu">
                <li><a th:href="@{/billets/form-voyage}">Acheter un billet</a></li>
                <li><a th:href="@{/billets/list}">Liste des billets</a></li>
            </ul>
        </li>
        <li class="menu-item">
            <a href="#" class="menu-link" onclick="toggleSubmenu(this); return false;">
                <i class="fas fa-dollar-sign"></i>
                <span>Tarification</span>
            </a>
            <ul class="submenu">
                <li><a th:href="@{/tarifs/create}">Ajouter un tarif</a></li>
                <li><a th:href="@{/tarifs}">Liste des tarifs</a></li>
            </ul>
        </li>
        <li class="menu-item">
            <a href="#" class="menu-link" onclick="toggleSubmenu(this); return false;">
                <i class="fas fa-user-tie"></i>
                <span>Chauffeurs</span>
            </a>
            <ul class="submenu">
                <li><a th:href="@{/chauffeurs/create}">Ajouter un chauffeur</a></li>
                <li><a th:href="@{/chauffeurs}">Liste des chauffeurs</a></li>
            </ul>
        </li>
    </ul>

    <div class="sidebar-footer">
        <p><i class="fas fa-info-circle"></i> Système de gestion</p>
    </div>

    <script>
        function toggleSubmenu(element) {
            const menuItem = element.parentElement;
            const isActive = menuItem.classList.contains('active');

            // Fermer tous les autres sous-menus
            document.querySelectorAll('.menu-item.active').forEach(item => {
                item.classList.remove('active');
            });

            // Ouvrir/fermer le sous-menu cliqué
            if (!isActive) {
                menuItem.classList.add('active');
            }
        }

        // Garder ouvert le menu correspondant à la page actuelle
        document.addEventListener('DOMContentLoaded', function() {
            const currentPath = window.location.pathname;
            document.querySelectorAll('.submenu a').forEach(link => {
                if (currentPath.includes(link.getAttribute('href'))) {
                    link.closest('.menu-item').classList.add('active');
                }
            });
        });
    </script>
</div>
</body>
</html>

